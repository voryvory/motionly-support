<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Motionly â€” ê³µì§€ / Updates</title>
<meta name="description" content="Motionly ê³µì§€ / Updates / ãŠçŸ¥ã‚‰ã›">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<style>
:root{--bg:#0f1220;--fg:#eaeaf2;--mut:#9aa3c7;--card:#151a2f;--bd:#2b3565;--acc:#7c3aed}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,Apple SD Gothic Neo,Segoe UI,Roboto,Helvetica,Arial}
.wrap{max-width:920px;margin:0 auto;padding:24px}
.header{display:flex;justify-content:space-between;align-items:center;gap:12px}
a{color:#9ecbff;text-decoration:none}
.badge{border:1px solid var(--bd);padding:6px 10px;border-radius:999px;color:#c7cff9;font-size:.85rem}
.card{background:rgba(21,26,47,.7);border:1px solid var(--bd);border-radius:14px;padding:16px;margin:12px 0}
.h1{font-size:clamp(22px,4vw,32px);margin:0 0 6px}
.lang{display:flex;gap:8px}
.lang button{background:transparent;border:1px solid var(--bd);border-radius:10px;color:var(--fg);padding:6px 10px;cursor:pointer}
.lang button.active{background:var(--acc);border-color:transparent}
.post{padding:14px 16px;border:1px solid var(--bd);border-radius:12px;background:#0e152e;margin:10px 0}
.post .meta{color:var(--mut);font-size:.9rem;display:flex;gap:8px;flex-wrap:wrap}
.tag{border:1px solid var(--bd);border-radius:999px;padding:2px 8px;color:#c9d3ff;font-size:.8rem}
.pin{color:#ffd966}
hr{border:none;border-top:1px solid var(--bd);margin:16px 0}
</style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div>
        <div class="badge">Motionly</div>
        <h1 class="h1">ê³µì§€ / Updates / ãŠçŸ¥ã‚‰ã›</h1>
      </div>
      <div class="lang" role="tablist" aria-label="Language">
        <button data-lang="ko" class="active">í•œêµ­ì–´</button>
        <button data-lang="en">EN</button>
        <button data-lang="ja">æ—¥æœ¬èª</button>
      </div>
    </div>

    <div class="card">
      <p style="margin:8px 0;color:#cbd5ff">
        ìƒˆ ê¸€ ì˜¬ë¦¬ê¸°: <code>news.json</code>ì— í•­ëª© ì¶”ê°€ í›„ ì»¤ë°‹í•˜ë©´ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤. (ë°±ì—”ë“œ/ë¡œê·¸ì¸ ë¶ˆí•„ìš”)
      </p>
      <p style="margin:0"><a href="/">â† í™ˆìœ¼ë¡œ</a> Â· <a href="/privacy.html">Privacy</a></p>
    </div>

    <div id="list"></div>
  </div>

<script>
// ===== ì„¤ì • =====
const NEWS_SRC = '/news.json'; // ë£¨íŠ¸ì˜ JSON ì‚¬ìš©               // â† JSON ê²½ë¡œ
let currentLang = (localStorage.getItem('motionly_news_lang') || 'ko');

// ===== ë Œë”ëŸ¬ =====
function render(posts){
  const list = document.getElementById('list');
  list.innerHTML = '';
  // ê³ ì •ê¸€ ë¨¼ì €, ì´í›„ ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœ                          // â† pin ìš°ì„ , ìµœì‹  ì •ë ¬
  posts.sort((a,b)=> (b.pin?1:0)-(a.pin?1:0) || b.date.localeCompare(a.date));
  for(const p of posts){
    const title = p.title[currentLang] || p.title.ko || '';
    const body  = p.body[currentLang]  || p.body.ko  || '';
    const tags  = (p.tags||[]).map(t=>`<span class="tag">#${t}</span>`).join(' ');
    const pin   = p.pin ? `<span class="pin">ğŸ“Œ PIN</span>` : '';
    const html = `
      <article class="post" aria-labelledby="${p.id}">
        <div class="meta">${pin}<span>${p.date}</span> ${tags}</div>
        <h3 id="${p.id}" style="margin:8px 0 6px">${title}</h3>
        <p style="margin:0;white-space:pre-wrap;color:#d6dcff">${body}</p>
      </article>`;
    list.insertAdjacentHTML('beforeend', html);
  }
}

// ===== ì–¸ì–´ í† ê¸€ =====
function setLang(lang){
  currentLang = lang;
  localStorage.setItem('motionly_news_lang', lang);
  document.querySelectorAll('.lang button').forEach(b=>{
    b.classList.toggle('active', b.dataset.lang === lang);
  });
  // ê¸°ì¡´ ë°ì´í„°ë¡œ ì¬ë Œë”                                    // â† ë§ˆì§€ë§‰ ë°ì´í„° ìºì‹œë¡œ ë³´ê´€
  if(window.__NEWS_DATA__) render(window.__NEWS_DATA__);
}
document.querySelectorAll('.lang button').forEach(b=>{
  b.addEventListener('click', ()=> setLang(b.dataset.lang));
});

// ===== ë°ì´í„° ë¡œë“œ =====
fetch(NEWS_SRC, {cache:'no-store'})
  .then(r=>r.json())
  .then(json=>{
    window.__NEWS_DATA__ = json;                             // â† ì¬ë Œë”ìš© ìºì‹œ
    setLang(currentLang);                                    // â† ë²„íŠ¼ ìƒíƒœ ë¨¼ì €
    render(json);
  })
  .catch(()=> {
    document.getElementById('list').innerHTML =
      `<div class="card">ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (<code>${NEWS_SRC}</code>)</div>`;
  });
</script>
</body>
</html>
